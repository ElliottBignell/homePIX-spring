<html xmlns:th="https://www.thymeleaf.org"
      th:replace="~{fragments/layout :: layout (~{::body},'albums')}">

<head>
</head>
<body>

<div class="album-main">

  <div class="centerstage">
    <div class="techfont stage" id="div_centrestage">
      <div class="row">
        <a th:href="${currentUrl}" style="color:blue;">
          <h3><- Return to shopping</h3>
        </a>
      </div>
      <div class="row" style="display:flex; justify-content:center; vertical-align:middle;">
        <table><tr><td>
          <table>
            <tr th:each="item : ${files}">
              <td style="padding:5px;">
                <a th:href="@{/collection/__${item.picture.id}__}">
                  <img th:id="@{item.picture${picture.id}__}"
                       class="lazyload imageinlist album"
                       th:width="${item.picture.displayWidth / 2}"
                       th:height="${item.picture.displayHeight / 2}"
                       th:src="${item.picture.mediumFilename}"
                       th:data-src="${item.picture.mediumFilename}"
                       th:alt="${item.picture.title}"
                  >
                </a>
              </td>
              <td th:for="${item.pricingTier.name()}"
                  th:if="${item.pricingTier.height} != -1"
                  th:text="${item.pricingTier.name() + ' (' +
                 #numbers.formatDecimal(
                     (item.pricingTier.height * (item.picture.aspectRatio ?: 0)),
                     1, 0
                 ) +
                 ' x ' + item.pricingTier.height + ') '}"
                  style="padding:5px;">
              </td>
              <td th:for="${item.pricingTier.name()}"
                  th:if="${item.pricingTier.height} == -1"
                  th:text="${item.pricingTier.name() + ' (' + item.picture.width +  ' x ' + item.picture.height + ') '}"
                  style="padding:5px;">
              </td>
              <td th:text="${#numbers.formatDecimal(item?.getTotalPrice() ?: 0, 1, 2) + ' CHF'}" style="padding:5px;">
                10.00
              </td>
            </tr>
          </table>
        </td>
        <td style="padding-left:25px;display:flex; justify-content:center; vertical-align:top;">
          <table>
            <tr>
              <td style="padding:5px;">
                <p>Totel:</p>
                <p th:text="${#numbers.formatDecimal(price, 1, 2)} + ' CHF'">100,000 CHF</p>
              </td>
            </tr>
            <tr>
              <td style="padding:5px;">
                <form action="/create-checkout-session" method="POST">
                  <button type="submit" class="btn btn-primary">Buy with Stripe</button>
                  <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
                </form>
              </td>
            </tr>
          </table>
        </td></tr></table>
      </div>
    </div>
  </div>
</div>

</body>

</html>
